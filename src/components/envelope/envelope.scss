$envelope-width: 50rem;
$envelope-height: 25rem;

$green: #0c4333;
$yellow: #fbda50;
$red: #ff504b;

@keyframes pop-up-envelope {
  from {
    transform: translateX(-50%) translateY(2vh) scale(0.2);
  }
  to {
    transform: translateX(-50%) translateY(20vh) scale(1);
  }
}

@keyframes tease {
  0%,
  50%,
  100% {
    transform: translateX(-50%) translateY(2vh) scale(0.2);
  }
  25% {
    transform: translateX(-50%) translateY(0.5vh) scale(0.2);
  }
}

@keyframes open {
  0% {
    z-index: 99;
    transform: rotateX(0deg);
    transform-origin: center top;
  }
  30% {
    z-index: 0;
  }
  100% {
    z-index: 0;
    transform: rotateX(180deg);
    transform-origin: center top;
  }
}
@keyframes appear {
  from {
    transform: translateX(-50%) translateY(100%);
  }
  to {
    transform: translateX(-50%) translateY(-50vh);
  }
}

.envelope {
  position: fixed;
  bottom: 0;
  left: 50%;
  transform: translateX(-50%) translateY(2vh) scale(0.2);
  transform-origin: bottom center;
  width: $envelope-width;
  height: $envelope-height;
  background-color: $color-primary-lighter;
  cursor: pointer;

  animation: tease 2s $ease-overshoot infinite;

  [data-large-view-envelope='true'] & {
    animation: pop-up-envelope 0.5s $ease-overshoot forwards;
    cursor: initial;
  }

  &__top {
    z-index: 99;
    width: 0;
    height: 0;
    border-left: $envelope-width / 2 solid transparent;
    border-right: $envelope-width / 2 solid transparent;
    border-top: $envelope-height / 2 solid $color-primary-dark;
    transform: translateX(0);

    [data-large-view-envelope='true'] & {
      animation: open 1s 0.3s $ease-out-heavy forwards;
    }
  }

  &__left {
    z-index: 10;
    position: absolute;
    bottom: 0;

    width: 0;
    height: 0;
    border-bottom: $envelope-height solid $color-primary-light;
    border-right: $envelope-height * 2 solid transparent;
  }
  &__right {
    z-index: 10;
    position: absolute;
    bottom: 0;

    width: 0;
    height: 0;
    border-bottom: $envelope-height solid $color-primary;
    border-left: $envelope-height * 2 solid transparent;
  }
  &__body {
    position: absolute;
    top: 3rem;
    left: 50%;
    background-color: white;
    width: ($envelope-width / 5) * 4;
    border-radius: 3px;
    box-shadow: 0.1rem 0.1rem 0.3rem rgba(black, 0.3);
    transform: translateX(-50%) translateY(100%);

    [data-large-view-envelope='true'] & {
      animation: appear 1.5s 0.3s $ease-in-out-light forwards;
    }
  }

  &__top,
  &__left,
  &__right {
    filter: blur(0.3rem);
    [data-large-view-envelope='true'] & {
      filter: none;
    }
  }
}
